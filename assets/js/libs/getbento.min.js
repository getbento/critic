!function(){var e=function(){this.logger=null,this.settings={meta:{account:null,theme:null,devMode:!1},logger:{name:"BentoAnalytics"},keen:{scriptUrl:"https://d26b395fwzu5fz.cloudfront.net/keen-tracking-1.1.3.min.js",projectId:null,writeKey:null,cookieName:"getbento-analytics-cookie"}},this._init()};e.prototype={_init:function(){this._captureData(),this._createLogger()},_captureData:function(){var e=document.getElementsByTagName("script"),i=e[e.length-1],t=i.getAttribute("data-bentoanalytics"),n=JSON.parse(t);this.settings.meta.account=n.account,this.settings.meta.theme=n.theme,this.settings.meta.devMode=n.devMode,this.settings.keen.projectId=n.id,this.settings.keen.writeKey=n.key},_createLogger:function(){this.logger=new o(this.settings.logger.name,this.settings.meta.devMode)},_getAvailable:function(){var e=this.settings.meta,i=this.settings.keen;return!!(e.account&&e.theme&&i.projectId&&i.writeKey)}};var i=function(){this.model=new e,this._logger=this.model.logger,this.service=null,this._ready=!1,this._queue=[],this._init()};i.prototype={_init:function(){this.model._getAvailable()?(this._logger.console.info(this._logger.name+": Initializing."),this._createService(),this.service.start()):this._logger.console.warn(this._logger.name+": Disabled. Configuration unavailable or incomplete.")},_createService:function(){if(!this.service){var e=this;this.service=new t(this.model,function(){e._startup()})}},_startup:function(){this._ready||(this._ready=!0,this._logger.console.info(this._logger.name+": API Ready."),this.trackPageview(),this._logger.console.info(this._logger.name+": Flushing Queue Started.",this._queue.length+" items to flush."),this._flushQueue(),this._logger.console.info(this._logger.name+": Flushing Queue Complete."))},_flushQueue:function(){if(this._queue&&this._queue.length>0){var e=this._queue.shift();switch(e.type){case"pageview":this.trackPageview.apply(this,e.args);break;case"event":this.trackEvent.apply(this,e.args)}this._flushQueue()}else this._queue=null},trackEvent:function(e,i,t,n){if(this._ready)this.service.trackEvent(e,i,t,n);else{var o={type:"event",args:arguments};this._queue.push(o),this._logger.console.info(this._logger.name+": Adding Event to Queue.",o)}},trackPageview:function(e,i){if(this._ready)this.service.trackPageview(e,i);else{var t={type:"pageview",args:arguments};this._queue.push(t),this._logger.console.info(this._logger.name+": Adding Pageview to Queue.",t)}}};var t=function(e,i){this.model=e,this._callback=i,this._logger=this.model.logger,this._config=this.model.settings.keen,this._normalizer=new n(this.model),this.ready=!1,this.loading=!1,this.Keen=null,this.client=null,this.session={cookie:null,timer:null}};t.prototype={start:function(){if(!this.ready&&!this.loading){var e=this;this.loading=!0,this._logger.console.info(this._logger.name+": Loading Keen IO Library."),this._load("Keen",this._config.scriptUrl,this),this.Keen.ready(function(){e.loading=!1,e._configure(),e.ready=!0,e._logger.console.info(e._logger.name+": Loading Keen IO Library Complete."),e._callback&&(e._callback(),e._callback=null)})}},trackEvent:function(e,i,t,n){if(this.ready){var o=this;this._logger.console.group(this._logger.name+": Running Service.trackEvent().");var s=this._normalizer.event(e,i,t,n);s?this.client.recordEvent("event",s,function(e,i){e?o._logger.console.error(o._logger.name+": Event Keen.recordEvent() Error.",e):o._logger.console.info(o._logger.name+": Event Keen.recordEvent() Successful.",i)}):this._logger.console.warn(o._logger.name+": None or invalid data provided to Service.trackEvent(). Request ignored."),this._logger.console.groupEnd()}else this._logger.console.warn(this._logger.name+": Service.trackEvent() called before Service is ready. Ignoring request.")},trackPageview:function(e,i){if(this.ready){var t=this;this._logger.console.group(this._logger.name+": Running Service.trackPageview().");var n=this._normalizer.pageview(e,i);this._logger.console.info(this._logger.name+": Normalized Pageview Payload Overrides.",JSON.parse(JSON.stringify(n))),this.client.recordEvent("pageview",n,function(e,i){e?t._logger.console.error(t._logger.name+": Pageview Keen.recordEvent() Error.",e):t._logger.console.info(t._logger.name+": Pageview Keen.recordEvent() Successful.",i)}),this._logger.console.groupEnd()}else this._logger.console.warn(this._logger.name+": Service.trackPageview() called before Service is ready. Ignoring request.")},_load:function(e,i,t){var n,o=!("Keen"===e||!window.Keen)&&window.Keen;t[e]=t[e]||{ready:function(s){var a,r=document.getElementsByTagName("head")[0],l=document.createElement("script"),g=window;l.onload=l.onerror=l.onreadystatechange=function(){if(!(l.readyState&&!/^c|loade/.test(l.readyState)||a)){if(l.onload=l.onreadystatechange=null,a=1,n=g.Keen,o)g.Keen=o;else try{delete g.Keen}catch(i){g.Keen=void 0}t[e]=n,t[e].ready(s)}},l.async=1,l.src=i,r.insertBefore(l,null)}}},_configure:function(){this.Keen.debug=this.model.settings.meta.devMode,this.Keen.enabled=!0,this._createClient(),this._createSessionCookie(),this._createSessionTimer()},_createClient:function(){var e=this;this.client=new this.Keen({projectId:e._config.projectId,writeKey:e._config.writeKey}),this.model.settings.meta.devMode&&this.client.on("recordEvent",function(i,t){e._logger.console.group(e._logger.name+": Running Keen.recordEvent()"),e._logger.console.info(e._logger.name+": Keen.recordEvent() Collection",i),e._logger.console.info(e._logger.name+": Keen.recordEvent() Payload",JSON.parse(JSON.stringify(t))),e._logger.console.groupEnd()}),this.client.extendEvents(function(){return{account:{name:e.model.settings.meta.account,theme:e.model.settings.meta.theme},page:{title:document.title,url:document.location.href},referrer:{url:document.referrer},tech:{browser:e.Keen.helpers.getBrowserProfile(),ip:"${keen.ip}",ua:"${keen.user_agent}"},time:e.Keen.helpers.getDatetimeIndex(),visitor:{id:e.session.cookie.get("user_id"),time_on_page:e.session.timer.value()},keen:{timestamp:(new Date).toISOString(),addons:[{name:"keen:ip_to_geo",input:{ip:"tech.ip"},output:"geo"},{name:"keen:ua_parser",input:{ua_string:"tech.ua"},output:"tech.info"},{name:"keen:url_parser",input:{url:"page.url"},output:"page.info"},{name:"keen:referrer_parser",input:{page_url:"page.url",referrer_url:"referrer.url"},output:"referrer.info"}]}}})},_createSessionCookie:function(){this.session.cookie=this.Keen.utils.cookie(this._config.cookieName),this.session.cookie.get("user_id")||this.session.cookie.set("user_id",this.Keen.helpers.getUniqueId())},_createSessionTimer:function(){this.session.timer=this.Keen.utils.timer(),this.session.timer.start()}};var n=function(e){this.model=e,this._logger=this.model.logger,this._events={categories:{validate:!0,regexp:new RegExp("(^forms$)|(^add to cart$)|(^online ordering|chow\\s?now$)|(^email sign\\s?up trigger button$)|(^reservations trigger button$)|(^social icons$)|(^phone number$)|(^address$)|(^resy:\\s\\d+$)","i"),list:[{id:"Forms",actions:{validate:!0,regexp:/(^submit$)/i,list:[{id:"Submit",labels:{validate:!0,regexp:/(^reservations.*$)|(^jobs$)|(^contact$)|(^catering$)|(^private events$)|(^email sign\s?up$)/i,list:[{id:"Reservations",values:{validate:!1}},{id:"Jobs",values:{validate:!1}},{id:"Contact",values:{validate:!1}},{id:"Catering",values:{validate:!1}},{id:"Private Events",values:{validate:!1}},{id:"Email Sign Up",values:{validate:!1}}]}}]}},{id:"Add To Cart",actions:{validate:!0,regexp:/(^click$)/i,list:[{id:"Click",labels:{validate:!0,regexp:/(^ecom$)|(^gift card[s]?$)/i,list:[{id:"eCom",values:{validate:!1}},{id:"Gift Cards",values:{validate:!1}}]}}]}},{id:"Online Ordering",actions:{validate:!0,regexp:/(^click$)/i,list:[{id:"Click",labels:{validate:!1}}]}},{id:"Email Sign Up Trigger Button",actions:{validate:!0,regexp:/(^click$)/i,list:[{id:"Click",labels:{validate:!1}}]}},{id:"Reservations Trigger Button",actions:{validate:!0,regexp:/(^click$)/i,list:[{id:"Click",labels:{validate:!1}}]}},{id:"Social Icons",actions:{validate:!0,regexp:/(^click$)/i,list:[{id:"Click",labels:{validate:!1}}]}},{id:"Phone Number",actions:{validate:!0,regexp:/(^click$)/i,list:[{id:"Click",labels:{validate:!1}}]}},{id:"Address",actions:{validate:!0,regexp:/(^click$)/i,list:[{id:"Click",labels:{validate:!1}}]}},{id:function(e,i){return i.location=e.split(" ")[1],"Resy"},actions:{validate:!0,regexp:/(^reservation placed$)/i,list:[{id:"Reservation Placed",labels:{validate:!1}}]}}]}}};n.prototype={pageview:function(e,i){var t={};return i&&(t.title=i),e&&(t.url=e),i||e?{page:t}:t},event:function(e,i,t,n){var o=!0,s={category:e,action:i,label:t,value:n};if(this._logger.console.group(this._logger.name+": Normalizing Event."),this._logger.console.info(this._logger.name+": Pre-Normalized Event Payload.",JSON.parse(JSON.stringify(s))),this._events.categories.validate){var a=this._findEventNode(e,this._events.categories);if(a)if(s.category=this._parseEventNodeId(a.id,e,s),this._logger.console.info(this._logger.name+": Category Found.",s.category),a.actions.validate){var r=this._findEventNode(i,a.actions);if(r)if(s.action=this._parseEventNodeId(r.id,i,s),this._logger.console.info(this._logger.name+": Action Found.",s.action),r.labels.validate){var l=this._findEventNode(t,r.labels);l?(s.label=this._parseEventNodeId(l.id,t,s),this._logger.console.info(this._logger.name+": Label Found.",s.label),l.values.validate?!isNaN(parseFloat(n))&&isFinite(n)?(s.value=n,this._logger.console.info(this._logger.name+": Value Found.",s.value)):(o=!1,this._logger.console.warn(this._logger.name+": Value Validation Failed.")):this._logger.console.info(this._logger.name+": Value Validation Disabled. Adding remain tiers as-is.")):(o=!1,this._logger.console.warn(this._logger.name+": Label Validation Failed."))}else this._logger.console.info(this._logger.name+": Label Validation Disabled. Adding remain tiers as-is.");else o=!1,this._logger.console.warn(this._logger.name+": Action Validation Failed.")}else this._logger.console.info(this._logger.name+": Label Validation Disabled. Adding remain tiers as-is.");else o=!1,this._logger.console.warn(this._logger.name+": Category Validation Failed.")}else this._logger.console.info(this._logger.name+": Category Validation Disabled. Adding remain tiers as-is.");var g=this._cleanEventPayload(s),c=o&&g?{event:g}:null;return c?this._logger.console.info(this._logger.name+": Post-Normalized Event Payload.",JSON.parse(JSON.stringify(c))):this._logger.console.warn(this._logger.name+": Post-Normalized Event Payload is invalid."),this._logger.console.groupEnd(),c},_findEventNode:function(e,i){if(e&&i){var t=i.regexp.exec(e);if(t&&t.length>1)for(var n=1;n<t.length;n++)if(t[n]&&n-1<i.list.length)return i.list[n-1]}return null},_parseEventNodeId:function(e,i,t){return"function"==typeof e?e(i,t):e},_cleanEventPayload:function(e){if(e){var i={},t=!1;for(var n in e)null!==e[n]&&void 0!==e[n]&&(i[n]=e[n],t=!0);return t?i:null}return null}};var o=function(e,i){this.name=e,this.enabled=i,this.console=null,this._init()};o.prototype={_init:function(){this.console=this.enabled&&window.console?window.console:this._createMutedConsole()},_createMutedConsole:function(){for(var e={},i=["error","group","groupCollapsed","groupEnd","info","log","warn"],t=0;t<i.length;t++)e[i[t]]=function(){};return e}},window.BentoAnalytics=window.BentoAnalytics||new i}();